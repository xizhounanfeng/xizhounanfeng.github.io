(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{343:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"微服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微服务"}},[s._v("#")]),s._v(" 微服务")]),s._v(" "),a("h3",{attrs:{id:"_01-单体架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_01-单体架构"}},[s._v("#")]),s._v(" 01. 单体架构")]),s._v(" "),a("ul",[a("li",[s._v("定义：\n"),a("ul",[a("li",[s._v("整个项目中所有功能模块都在一个工程中开发")]),s._v(" "),a("li",[s._v("项目部署时需要对所有模块一起编译、打包")]),s._v(" "),a("li",[s._v("项目的架构设计、开发模式都非常简单")])])]),s._v(" "),a("li",[s._v("优缺点：\n"),a("ul",[a("li",[s._v("优点：当项目规模较小时，这种模式上手快，部署、运维也都很方便")]),s._v(" "),a("li",[s._v("缺点：随着项目的业务规模越来越大，单体架构就呈现出越来越多的问题\n"),a("ul",[a("li",[a("strong",[s._v("团队协作成本高")])]),s._v(" "),a("li",[a("strong",[s._v("系统发布效率低")]),s._v("：任何模块变更都需要发布整个系统，而系统发布过程中需要多个模块之间制约较多，需要对比各种文件，任何一处出现问题都会导致发布失败，往往一次发布需要数十分钟甚至数小时")]),s._v(" "),a("li",[a("strong",[s._v("系统可用性差")]),s._v("：单体架构各个功能模块是作为一个服务部署，相互之间会互相影响，一些热点功能会耗尽系统资源，导致其它服务低可用")])])])])])]),s._v(" "),a("h3",{attrs:{id:"_02-微服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_02-微服务"}},[s._v("#")]),s._v(" 02. 微服务")]),s._v(" "),a("ul",[a("li",[s._v("定义：服务化，即将单体架构中的功能模块从单体应用中拆分出来，独立部署为多个服务\n"),a("ul",[a("li",[s._v("满足特点：\n"),a("ul",[a("li",[a("strong",[s._v("单一职责")]),s._v("：一个微服务负责一部分业务功能，并且其核心数据不依赖于其它模块")]),s._v(" "),a("li",[a("strong",[s._v("团队自治")]),s._v("：每个微服务都有自己独立的开发、测试、发布、运维人员，团队人员规模较小")]),s._v(" "),a("li",[a("strong",[s._v("服务自治")]),s._v("：每个微服务都独立打包部署，访问自己独立的数据库。并且要做好服务隔离，避免对其它服务产生影响")])])])])]),s._v(" "),a("li",[s._v("微服务架构虽然能解决单体架构的各种问题，但在拆分的过程中，还会"),a("code",[s._v("面临")]),s._v("很多其它"),a("code",[s._v("问题")]),s._v("：\n"),a("ul",[a("li",[s._v("如果出现跨服务的业务该如何处理？")]),s._v(" "),a("li",[s._v("页面请求到底该访问哪个服务？")]),s._v(" "),a("li",[s._v("如何实现各个服务之间的服务隔离？")])])])]),s._v(" "),a("h3",{attrs:{id:"_03-springcloud"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_03-springcloud"}},[s._v("#")]),s._v(" 03. SpringCloud")]),s._v(" "),a("ul",[a("li",[s._v("微服务拆分以后碰到的各种问题都有对应的解决方案和微服务组件：\n"),a("ul",[a("li",[s._v("SpringCloud框架可以说是目前Java领域最全面的微服务组件的集合")])])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://jsd.onmicrosoft.cn/gh/xizhounanfeng/blogImg/springcloud.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"_04-微服务拆分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_04-微服务拆分"}},[s._v("#")]),s._v(" 04. 微服务拆分")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("拆分目标")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("高内聚")]),s._v("：每个微服务的职责要尽量单一，包含的业务相互关联度高、完整度高\n"),a("ul",[a("li",[a("strong",[s._v("单一职责")]),s._v("：但不能说一个微服务就一个接口，而是要保证微服务内部业务的完整性为前提")]),s._v(" "),a("li",[s._v("目标是当我们要修改某个业务时，最好就只修改当前微服务，这样变更的成本更低")])])]),s._v(" "),a("li",[a("strong",[s._v("低耦合")]),s._v("：每个微服务的功能要相对独立，尽量减少对其它微服务的依赖，或者依赖接口的稳定性要强")]),s._v(" "),a("li",[s._v("一旦微服务做到了高内聚，那么服务之间的"),a("strong",[s._v("耦合度")]),s._v("自然就降低")])])]),s._v(" "),a("li",[a("p",[s._v("微服务之间不可避免的会有或多或少的业务交互，即"),a("code",[s._v("出现服务间调用")])]),s._v(" "),a("ul",[a("li",[s._v("例如下单时需要查询商品数据\n"),a("ul",[a("li",[s._v("不能在订单服务直接查询商品数据库，否则就导致了数据耦合")]),s._v(" "),a("li",[s._v("应该由商品服务对应暴露接口，并且一定要保证微服务对外"),a("strong",[s._v("接口的稳定性")]),s._v("（即：尽量保证接口外观不变）")]),s._v(" "),a("li",[s._v("虽然出现了服务间调用，但此时无论你如何在商品服务做内部修改，都不会影响到订单微服务，服务间的耦合度就降低了")])])])])]),s._v(" "),a("li",[a("p",[s._v("拆分方式：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("纵向拆分")]),s._v("：按照项目的功能模块来拆分\n"),a("ul",[a("li",[s._v("例如商城中，就有用户管理功能、订单管理功能、购物车功能、商品管理功能、支付功能等")]),s._v(" "),a("li",[s._v("那么按照功能模块将他们拆分为一个个服务，就属于纵向拆分")]),s._v(" "),a("li",[s._v("这种拆分模式可以尽可能"),a("code",[s._v("提高服务的内聚性")])])])]),s._v(" "),a("li",[a("strong",[s._v("横向拆分")]),s._v("：抽取各个功能模块之间的公共业务部分作为通用服务\n"),a("ul",[a("li",[s._v("例如用户登录是需要发送消息通知，记录风控数据，下单时也要发送短信，记录风控数据")]),s._v(" "),a("li",[s._v("因此消息发送、风控数据记录就是通用的业务功能，因此可以将他们分别抽取为公共服务：消息中心服务、风控管理服务")]),s._v(" "),a("li",[s._v("这样可以"),a("code",[s._v("提高业务的复用性，避免重复开发")]),s._v("。同时通用业务一般接口稳定性较强，也不会"),a("code",[s._v("使服务之间过分耦合")])])])])])]),s._v(" "),a("li",[a("p",[s._v("工程结构：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("完全解耦")]),s._v("：每一个微服务都创建为一个独立的工程，甚至可以使用不同的开发语言来开发，项目完全解耦\n"),a("ul",[a("li",[s._v("优点：服务之间耦合度低")]),s._v(" "),a("li",[s._v("缺点：每个项目都有自己的独立仓库，管理起来比较麻烦")])])]),s._v(" "),a("li",[a("strong",[s._v("Maven聚合")]),s._v("：整个项目为一个Project，然后每个微服务是其中的一个Module\n"),a("ul",[a("li",[s._v("优点：项目代码集中，管理和运维方便")]),s._v(" "),a("li",[s._v("缺点：服务之间耦合，编译时间较长")])])])])])]),s._v(" "),a("h2",{attrs:{id:"服务注册和发现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务注册和发现"}},[s._v("#")]),s._v(" 服务注册和发现")]),s._v(" "),a("ul",[a("li",[s._v("背景：假如商品微服务被调用较多，为了应对更高的并发，我们进行了多实例部署")])]),s._v(" "),a("div",{staticClass:"center-container"},[a("p",[a("img",{attrs:{src:"https://jsd.onmicrosoft.cn/gh/xizhounanfeng/blogImg/cart-service.jpg",alt:""}})])]),a("ul",[a("li",[s._v("此时，每个"),a("code",[s._v("item-service")]),s._v("的实例其IP或端口不同，出现的问题：\n"),a("ul",[a("li",[s._v("item-service这么多实例，cart-service如何知道每一个实例的地址？")]),s._v(" "),a("li",[s._v("http请求要写url地址，"),a("code",[s._v("cart-service")]),s._v("服务到底该调用哪个实例呢？")]),s._v(" "),a("li",[s._v("如果在运行过程中，某一个"),a("code",[s._v("item-service")]),s._v("实例宕机，"),a("code",[s._v("cart-service")]),s._v("依然在调用该怎么办？")]),s._v(" "),a("li",[s._v("如果并发太高，"),a("code",[s._v("item-service")]),s._v("临时多部署了N台实例，"),a("code",[s._v("cart-service")]),s._v("如何知道新实例的地址？")])])]),s._v(" "),a("li",[s._v("为了解决上述问题，就必须引入注册中心的概念")])]),s._v(" "),a("h3",{attrs:{id:"_01-注册中心原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_01-注册中心原理"}},[s._v("#")]),s._v(" 01. 注册中心原理")]),s._v(" "),a("ul",[a("li",[s._v("在微服务远程调用的过程中，包括两个角色：\n"),a("ul",[a("li",[s._v("服务提供者：提供接口供其它微服务访问，比如"),a("code",[s._v("item-service")])]),s._v(" "),a("li",[s._v("服务消费者：调用其它微服务提供的接口，比如"),a("code",[s._v("cart-service")])])])]),s._v(" "),a("li",[s._v("在大型微服务项目中，服务提供者的数量会非常多，为了管理这些服务就引入了"),a("strong",[s._v("注册中心")]),s._v("的概念")]),s._v(" "),a("li",[s._v("注册中心、服务提供者、服务消费者三者间关系如下：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://jsd.onmicrosoft.cn/gh/xizhounanfeng/blogImg/zhucezhongxin.jpg",alt:""}})]),s._v(" "),a("ul",[a("li",[s._v("流程分析：\n"),a("ul",[a("li",[s._v("服务提供者启动时，就会注册自己的服务信息（服务名、IP、端口）到注册中心")]),s._v(" "),a("li",[s._v("服务调用者从注册中心订阅想要的服务，获取服务对应的实例列表（1个服务可能多实例部署）")]),s._v(" "),a("li",[s._v("服务调用者自己对实例列表负载均衡，挑选一个实例")]),s._v(" "),a("li",[s._v("服务调用者向该实例发起远程调用")])])]),s._v(" "),a("li",[s._v("当服务提供者的实例宕机或者启动新实例时，服务调用者如何得知呢？\n"),a("ul",[a("li",[s._v("服务提供者会定期向注册中心发送请求，报告自己的健康状态（心跳请求）")]),s._v(" "),a("li",[s._v("当注册中心长时间收不到提供者的心跳时，会认为该实例宕机，将其从服务的实例列表中剔除")]),s._v(" "),a("li",[s._v("当服务有新实例启动时，会发送注册服务请求，其信息会被记录在注册中心的服务实例列表")]),s._v(" "),a("li",[s._v("当注册中心服务列表变更时，会主动通知服务调用者，更新本地服务列表")])])])]),s._v(" "),a("h3",{attrs:{id:"_02-nacos注册中心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_02-nacos注册中心"}},[s._v("#")]),s._v(" 02. Nacos注册中心")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("目前国内比较常见的开源注册中心框架：")]),s._v(" "),a("ul",[a("li",[s._v("Eureka：Netflix公司出品，目前被集成在SpringCloud当中，一般用于Java应用")]),s._v(" "),a("li",[s._v("Nacos：Alibaba公司出品，目前被集成在SpringCloudAlibaba中，一般用于Java应用")]),s._v(" "),a("li",[s._v("Consul：HashiCorp公司出品，目前集成在SpringCloud中，不限制微服务语言")])])]),s._v(" "),a("li",[a("p",[s._v("由于Nacos是国内产品，中文文档比较丰富，而且同时具备"),a("strong",[s._v("配置管理")]),s._v("功能 --\x3e 在国内使用较多")])]),s._v(" "),a("li",[a("p",[s._v("创建nacos容器并访问：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("导入"),a("code",[s._v("nacos.sql")]),s._v("到Docker Mysql容器中：navicat连接docker mysql数据库，直接运行sql")])]),s._v(" "),a("li",[a("p",[s._v("环境配置 "),a("code",[s._v("custom.env")]),s._v("：完成MySQL环境配置")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("PREFER_HOST_MODE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hostname\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MODE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standalone\nSPRING_DATASOURCE_PLATFORM"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\nMYSQL_SERVICE_HOST"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".253")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".128")]),s._v("\nMYSQL_SERVICE_DB_NAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nacos\nMYSQL_SERVICE_PORT"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nMYSQL_SERVICE_USER"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\nMYSQL_SERVICE_PASSWORD"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\nMYSQL_SERVICE_DB_PARAM"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("characterEncoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("connectTimeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("socketTimeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("autoReconnect"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("useSSL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("allowPublicKeyRetrieval"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("serverTimezone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Asia"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Shanghai\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在Linux "),a("code",[s._v("/root")]),s._v("目录下，创建"),a("code",[s._v("nacos")]),s._v("目录，并将"),a("code",[s._v("custom.env")]),s._v("上传到此目录")])]),s._v(" "),a("li",[a("p",[s._v("进入root目录，执行docker命令，创建并启动nacos：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" nacos "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--env-file ./nacos/custom.env "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v(":8848 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9848")]),s._v(":9848 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9849")]),s._v(":9849 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nnacos/nacos-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("nacos启动完成后，访问地址：http://192.168.253.128:8848/nacos/")]),s._v(" "),a("ul",[a("li",[s._v("首次访问会跳转到登录页，账号、密码均是nacos")])])])])])]),s._v(" "),a("h3",{attrs:{id:"_03-服务注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_03-服务注册"}},[s._v("#")]),s._v(" 03. 服务注册")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("将"),a("code",[s._v("item-service")]),s._v("注册到Nacos，步骤如下：")]),s._v(" "),a("ul",[a("li",[s._v("引入依赖")]),s._v(" "),a("li",[s._v("配置Nacos地址")]),s._v(" "),a("li",[s._v("启动服务实例")])])]),s._v(" "),a("li",[a("p",[s._v("添加依赖：在"),a("code",[s._v("item-service")]),s._v("的"),a("code",[s._v("pom.xml")]),s._v("中添加依赖")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--nacos 服务注册发现--\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.alibaba.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-alibaba-nacos-discovery"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("配置Nacos:在"),a("code",[s._v("item-service")]),s._v("的"),a("code",[s._v("application.yml")]),s._v("中添加nacos地址配置")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务名称")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server-addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.150.101"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nacos地址")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("启动服务实例:")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("为了测试一个服务多个实例的情况，我们再配置一个"),a("code",[s._v("item-service")]),s._v("的部署实例")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://jsd.onmicrosoft.cn/gh/xizhounanfeng/blogImg/peizhi-01.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("配置启动项，注意重命名并且配置新的端口，避免冲突 ：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://jsd.onmicrosoft.cn/gh/xizhounanfeng/blogImg/peizhi-02.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("重启"),a("code",[s._v("item-service")]),s._v("的两个实例，访问nacos控制台，可以发现服务注册成功：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://jsd.onmicrosoft.cn/gh/xizhounanfeng/blogImg/peizhi-03.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("点击详情，可以查看到"),a("code",[s._v("item-service")]),s._v("服务的两个实例信息：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://jsd.onmicrosoft.cn/gh/xizhounanfeng/blogImg/peizhi-04.png",alt:""}})])])])])]),s._v(" "),a("h3",{attrs:{id:"_04-服务发现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_04-服务发现"}},[s._v("#")]),s._v(" 04. 服务发现")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("定义：服务的消费者去nacos订阅服务")])]),s._v(" "),a("li",[a("p",[s._v("步骤：")]),s._v(" "),a("ul",[a("li",[s._v("引入依赖")]),s._v(" "),a("li",[s._v("配置Nacos地址")]),s._v(" "),a("li",[s._v("发现并调用服务")])])]),s._v(" "),a("li",[a("p",[s._v("引入依赖")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("除了要引入nacos依赖以外，由于还需要负载均衡，因此要引入SpringCloud提供的LoadBalancer依赖")])]),s._v(" "),a("li",[a("p",[s._v("在"),a("code",[s._v("cart-service")]),s._v("中的"),a("code",[s._v("pom.xml")]),s._v("中添加下面的依赖：")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--nacos 服务注册发现--\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.alibaba.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-alibaba-nacos-discovery"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("Nacos的依赖与服务注册时一致，这个依赖中同时包含了服务注册和发现的功能\n"),a("ul",[a("li",[s._v("因为任何一个微服务都可以调用别人，也可以被别人调用，即可以是调用者，也可以是提供者")]),s._v(" "),a("li",[s._v("启动"),a("code",[s._v("cart-service")]),s._v("，同样会注册到Nacos")])])])])])])]),s._v(" "),a("li",[a("p",[s._v("配置Nacos地址：在"),a("code",[s._v("cart-service")]),s._v("的"),a("code",[s._v("application.yml")]),s._v("中添加nacos地址配置")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server-addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.150.101"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("发现并调用服务")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("cart-service")]),s._v("启动后，服务调用者"),a("code",[s._v("cart-service")]),s._v("就可以去订阅"),a("code",[s._v("item-service")]),s._v("服务")]),s._v(" "),a("ul",[a("li",[s._v("item-service有多个实例，而真正发起调用时只需要知道一个实例的地址")]),s._v(" "),a("li",[s._v("服务调用者必须利用负载均衡的算法，从多个实例中挑选一个去访问\n"),a("ul",[a("li",[s._v("常见的负载均衡算法有：\n"),a("ul",[a("li",[s._v("随机")]),s._v(" "),a("li",[s._v("轮询")]),s._v(" "),a("li",[s._v("IP的hash")]),s._v(" "),a("li",[s._v("最近最少访问...")])])]),s._v(" "),a("li",[s._v("本次选择最简单的随机负载均衡")])])])])]),s._v(" "),a("li",[a("p",[s._v("服务发现需要用到一个工具 "),a("code",[s._v("DiscoveryClient")]),s._v("【SpringCloud已经帮我们自动装配】，我们可以直接注入使用")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DiscoveryClient")]),s._v(" discoveryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("对原来的远程调用做修改:")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("之前：调用时我们需要写死服务提供者的IP和端口")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ItemDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("exchange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:8081/items?ids={ids}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 请求路径")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//请求方式")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ParameterizedTypeReference")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ItemDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//返回值类型")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CollUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("itemIds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('","')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//请求参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("现在：DiscoveryClient发现服务实例列表，然后通过负载均衡算法，选择一个实例去调用")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 发现item-service服务列表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" instances "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" discoveryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstances")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"item-service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 负载均衡，选择一个实例")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceInstance")]),s._v(" instance "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" instances"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RandomUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("randomInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instances"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 发送请求")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ItemDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("exchange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tinstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/items?ids={ids}"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 请求路径")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//请求方式")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ParameterizedTypeReference")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ItemDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//返回值类型")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CollUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("itemIds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('","')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//请求参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])])])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);